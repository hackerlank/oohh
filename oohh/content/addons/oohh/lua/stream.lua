if SERVER then return endlocal STREAM_URL = "http://epic-empires.co.uk:8000/ukgamer.ogg"local FONTSIZE = 10local BOXHEIGHT = 50-------------------------------------lastsong = {}local listeners = 0local boxalpha = 0local textalpha = 0local boxy = -BOXHEIGHTlocal fadingin = falselocal fadingout = falseplayer = NULLfunction drawhud()	if fadingin then		boxy = math.clamp(boxy + 1, -BOXHEIGHT, 0)		boxalpha = math.clamp(boxalpha + 0.01, 0, 0.5)		if boxy == 0 then			textalpha = math.clamp(textalpha + 0.03, 0, 1)		end	end		if fadingout then		textalpha = math.clamp(textalpha - 0.03, 0, 1)		if textalpha == 0 then			boxy = math.clamp(boxy - 1, -BOXHEIGHT, 0)			boxalpha = math.clamp(boxalpha - 0.01, 0, 0.5)		end	end        if fadingin and textalpha == 1 then --the text is the last thing to fade in		fadingin = false	end		if fadingout and boxy == -BOXHEIGHT then		fadingout = false	end		if boxy == -BOXHEIGHT then return end        local listenerstxt, songtext = ""	    if not lastsong.title or not lastsong.artist or lastsong.title == "" or lastsong.artist == "" then        songtext = "Unknown"    else        songtext = lastsong.artist .. " - " .. lastsong.title    end        if listeners == 1 then		listenerstxt = listeners .. " listener"	else		listenerstxt = listeners .. " listeners"	end        local width = math.max((graphics.GetTextSize("segoeui.ttf", songtext).w * FONTSIZE) + 15, 330)    	graphics.DrawRect(Rect(0, boxy, width, BOXHEIGHT), Color(0, 0, 0, boxalpha), 6, nil, nil, nil, nil, false, true, false, false)	graphics.DrawText("ukgamer's radio (tunein in console)", Vec2(10, 10), "segoeui.ttf", Vec2() + FONTSIZE, Color(1, 1, 1, textalpha))		graphics.DrawText(listenerstxt, Vec2(width - 7, 10), "segoeui.ttf", Vec2() + FONTSIZE, Color(1, 1, 1, textalpha), Vec2(-1, 0))	graphics.DrawText(songtext, Vec2(10, 30), "segoeui.ttf", Vec2() + FONTSIZE, Color(1, 1, 1, textalpha))endfunction show()	fadingout = false	fadingin = true	timer.Simple(5, function() fadingin = false fadingout = true end)endfunction startplayer()    if player and player:IsValid() then player:Remove() end    player = Channel(BASS_URL, STREAM_URL, 0, BASS_STREAM_STATUS)    player:Play()    player:SetOnTagsChanged(BASS_TAG_OGG, function(data)            lastsong = data        show()    end)endfunction stopplayer()	if player and player:IsValid() then        hook.Remove("DrawHUD", "nowplaying")        player:Remove()    endendfunction update()	if player == NULL then return end        if not player:IsPlaying() then        timer.Remove("streamtimer")        return    end    http.Get("http://lab.epic-empires.co.uk/stream.php", function(data)		local info = string.explode(data.content, "\n")		listeners = tonumber(info[2]) or 0	end)endupdate()hook.Add("DrawHUD", "nowplaying", drawhud)timer.Create("streamtimer", 10, 0, update)console.AddCommand("tunein", startplayer)console.AddCommand("tuneout", stopplayer)console.AddCommand("nowplaying", show)